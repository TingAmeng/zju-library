{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/book-detail/book-detail.module.ts","../../src/pages/book-items/book-items.ts","../../src/pages/about/about.module.ts","../../src/pages/about/about.ts","../../src/pages/book-items/book-items.module.ts","../../src/pages/book-search/book-search.module.ts","../../src/pages/book-search/book-search.ts","../../src/components/components.module.ts","../../src/pages/borrow-history/borrow-history.module.ts","../../src/pages/borrow-history/borrow-history.ts","../../src/pages/login/login.module.ts","../../src/pages/login/login.ts","../../src/services/toast.service.ts","../../src/pages/tabs/tabs.ts","../../src/pages/collection/collection.ts","../../src/pages/home/home.ts","../../src/pages/me/me.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/classes/book.ts","../../src/components/search-box/search-box.ts","../../src/app/app.component.ts","../../src/services/library.service.ts","../../src/services/account.service.ts","../../src/pages/book-detail/book-detail.ts","../../src/app/const.ts","../../src/services/update.service.ts","../../src/services/collection.service.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 121;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 121\n// module chunks = 0","var map = {\n\t\"../pages/about/about.module\": [\n\t\t167\n\t],\n\t\"../pages/book-detail/book-detail.module\": [\n\t\t164\n\t],\n\t\"../pages/book-items/book-items.module\": [\n\t\t172\n\t],\n\t\"../pages/book-search/book-search.module\": [\n\t\t173\n\t],\n\t\"../pages/borrow-history/borrow-history.module\": [\n\t\t176\n\t],\n\t\"../pages/login/login.module\": [\n\t\t179\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 163;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 163\n// module chunks = 0","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BookDetailPage } from './book-detail';\n\n@NgModule({\n  declarations: [\n    BookDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BookDetailPage),\n  ],\n})\nexport class BookDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-detail/book-detail.module.ts","import { Component } from '@angular/core';\nimport {IonicPage, Loading, LoadingController, NavController, NavParams} from 'ionic-angular';\nimport {LibraryService} from \"../../services/library.service\";\nimport {ToastService} from \"../../services/toast.service\";\nimport {BookItem} from \"../../classes/book\";\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-book-items',\n  templateUrl: 'book-items.html',\n})\nexport class BookItemsPage {\n  loading:Loading;\n  items:BookItem[]=null;\n\n  constructor(\n    public navCtrl: NavController,\n    private librarySvc: LibraryService,\n    private loadingCtrl: LoadingController,\n    public navParams: NavParams,\n    private toastSvc: ToastService,\n  ) {}\n\n  ionViewWillLoad(){\n    this.loading=this.loadingCtrl.create({\n      spinner: 'dots',\n      content: '加载中'\n    });\n    this.loading.present();\n  }\n\n  get id():string{\n    return this.navParams.get('id');\n  }\n\n  get base():string{\n    let base=this.navParams.get('base');\n    if (!base) {\n      base='ZJU01';\n    }\n    return base;\n  }\n\n  ionViewDidLoad(){\n    this.freshenItems().catch(()=>{\n      this.navCtrl.pop();\n      this.toastSvc.toast('加载失败');\n    }).then(()=>{\n      this.loading.dismiss();\n    });\n  }\n\n\n  freshenItems():Promise<void>{\n    return this.librarySvc.bookItems(this.base,this.id).then(items=>{\n      // console.log(items);\n      this.items=items;\n    });\n  }\n\n  get borrowedItemsCount():number{\n    let count=0;\n    for(let item of this.items){\n      if (item.borrowed) {\n        count++;\n      }\n    }\n    return count;\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-items/book-items.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport {AboutPage} from \"./about\";\n\n@NgModule({\n  declarations: [\n    AboutPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AboutPage),\n  ],\n})\nexport class AboutPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/about.module.ts","import { Component } from '@angular/core';\nimport {AlertController, IonicPage, NavController, Platform} from 'ionic-angular';\nimport {InAppBrowser} from \"@ionic-native/in-app-browser\";\nimport {CONST} from \"../../app/const\";\nimport {UpdateService} from \"../../services/update.service\";\nimport {Clipboard} from \"@ionic-native/clipboard\";\nimport {ToastService} from \"../../services/toast.service\";\n\n@IonicPage()\n@Component({\n  selector: 'page-about',\n  templateUrl: 'about.html'\n})\nexport class AboutPage {\n  version=CONST.version;\n\n  constructor(\n    private navCtrl: NavController,\n    public updateSvc: UpdateService,\n    private platform: Platform,\n    private alertCtrl: AlertController,\n    private inAppBrowser: InAppBrowser,\n    private clipborad: Clipboard,\n    private toastSvc: ToastService,\n  ) {}\n\n  openGitHubLink(){\n    this.inAppBrowser.create('https://github.com/awmleer/zjuLibrary','_system');\n  }\n\n  copyToClipboard(text:string){\n    this.clipborad.copy(text).then(() => {\n      this.toastSvc.toast('已复制到剪贴板');\n    });\n  }\n\n  update(){\n    if (this.platform.is('android')) {\n      this.inAppBrowser.create(this.updateSvc.androidDownloadLink,'_system');\n    }else{\n      this.alertCtrl.create({\n        title: '更新',\n        subTitle: '请在App Store中进行更新',\n        buttons: ['好的']\n      }).present();\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/about/about.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BookItemsPage } from './book-items';\n\n@NgModule({\n  declarations: [\n    BookItemsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BookItemsPage),\n  ],\n})\nexport class BookItemsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-items/book-items.module.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BookSearchPage } from './book-search';\nimport {ComponentsModule} from \"../../components/components.module\";\n\n@NgModule({\n  declarations: [\n    BookSearchPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BookSearchPage),\n    ComponentsModule\n  ],\n})\nexport class BookSearchPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-search/book-search.module.ts","import { Component } from '@angular/core';\nimport {IonicPage, Loading, LoadingController, NavController, NavParams} from 'ionic-angular';\nimport {LibraryService} from \"../../services/library.service\";\nimport {BookRecord} from \"../../classes/book\";\nimport {BookDetailPage} from \"../book-detail/book-detail\";\nimport {ToastService} from \"../../services/toast.service\";\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-book-search',\n  templateUrl: 'book-search.html',\n})\nexport class BookSearchPage {\n  searchText:string;\n  loading:Loading=null;\n  setId:string;\n  totalCount:number=-1;\n  bulkLength:number=10;\n  bookRecords:BookRecord[]=[];\n  recordStartNumber:number;\n  hasError:boolean;\n  // showManualLoad: boolean=false;\n\n  constructor(\n    private navCtrl: NavController,\n    private navParams: NavParams,\n    private librarySvc: LibraryService,\n    private loadingCtrl: LoadingController,\n    private toastSvc: ToastService\n  ) {\n    this.searchText=navParams.get('searchText');\n  }\n\n  ionViewDidLoad() {\n    this.search();\n  }\n\n  showLoading(){\n    if (this.loading==null) {\n      this.loading=this.loadingCtrl.create({\n        spinner: 'dots',\n        content: '加载中'\n      });\n      this.loading.present();\n    }\n  }\n\n  dismissLoading(){\n    if (this.loading) {\n      this.loading.dismiss();\n    }\n    this.loading=null;\n  }\n\n  search(){\n    this.showLoading();\n    this.hasError=null;\n    this.totalCount=-1;\n    this.bookRecords=[];\n    this.recordStartNumber=1;\n    this.librarySvc.search(this.searchText).then((data)=>{\n      this.setId=data.setId;\n      this.totalCount=data.totalCount;\n      this.loadRecords();\n    }).catch(()=>{\n      this.dismissLoading();\n      this.hasError=true;\n      this.toastSvc.toast('加载失败');\n    });\n  }\n\n  loadRecords():Promise<void>{\n    // this.showLoading();\n    return this.librarySvc.present(this.recordStartNumber,this.bulkLength,this.setId).then(bookRecords=>{\n      Array.prototype.push.apply(this.bookRecords,bookRecords);\n      this.recordStartNumber+=this.bulkLength;\n      this.dismissLoading();\n      this.hasError=false;\n    }).catch(()=>{\n      this.dismissLoading();\n      if (this.hasError == null) {\n        this.hasError=true;\n      }\n      this.toastSvc.toast('加载失败');\n    });\n  }\n\n  get allRecordsLoaded():boolean{\n    return this.recordStartNumber>this.totalCount\n  }\n\n  goBookDetail(bookRecord){\n    this.navCtrl.push(BookDetailPage,{\n      'id': bookRecord.id\n    });\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-search/book-search.ts","import { NgModule } from '@angular/core';\nimport { SearchBoxComponent } from './search-box/search-box';\nimport {IonicModule} from \"ionic-angular\";\n\n@NgModule({\n\tdeclarations: [SearchBoxComponent],\n\timports: [\n    IonicModule,\n  ],\n\texports: [SearchBoxComponent]\n})\nexport class ComponentsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BorrowHistoryPage } from './borrow-history';\n\n@NgModule({\n  declarations: [\n    BorrowHistoryPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BorrowHistoryPage),\n  ],\n})\nexport class BorrowHistoryPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/borrow-history/borrow-history.module.ts","import { Component } from '@angular/core';\nimport {IonicPage, LoadingController, NavController, NavParams} from 'ionic-angular';\nimport {AccountService} from \"../../services/account.service\";\nimport {ToastService} from \"../../services/toast.service\";\nimport {HistoryBorrow} from \"../../classes/borrow\";\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-borrow-history',\n  templateUrl: 'borrow-history.html',\n})\nexport class BorrowHistoryPage {\n  borrows:HistoryBorrow[]=[];\n\n  constructor(\n    private navCtrl: NavController,\n    private loadingCtrl: LoadingController,\n    private accountSvc: AccountService,\n    private toastSvc: ToastService,\n  ) {}\n\n  ionViewDidLoad() {\n    let loading=this.loadingCtrl.create({\n      spinner: 'dots',\n      content: '加载中'\n    });\n    loading.present();\n    // this.accountSvc.getHistoryBorrows().then((borrows)=>{\n    //   this.borrows=borrows;\n    //   loading.dismiss();\n    // }).catch(()=>{\n    //   loading.dismiss().then(()=>{\n    //     this.navCtrl.pop();\n    //     this.toastSvc.toast('获取借阅历史失败');\n    //   });\n    // });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/borrow-history/borrow-history.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport {IonicPage, LoadingController, NavController} from 'ionic-angular';\nimport {AccountService} from \"../../services/account.service\";\nimport {ToastService} from \"../../services/toast.service\";\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  username:string;\n  password:string;\n\n  constructor(\n    public navCtrl: NavController,\n    private accountSvc: AccountService,\n    private toastSvc: ToastService,\n    private loadingCtrl: LoadingController\n  ) {}\n\n  login(){\n    let loading=this.loadingCtrl.create({\n      spinner: 'dots',\n      content: '登录中'\n    });\n    this.accountSvc.login(this.username,this.password).then(()=>{\n      this.navCtrl.pop().then(()=>{\n        this.toastSvc.toast('登录成功');\n      });\n    }).catch(()=>{\n      loading.dismiss().then(()=>{\n        this.toastSvc.toast('登录失败');\n      });\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import {Injectable} from \"@angular/core\";\nimport {Toast, ToastController} from \"ionic-angular\";\n\n\n@Injectable()\nexport class ToastService {\n  constructor(\n    private toastCtrl: ToastController\n  ){}\n\n  t: Toast;\n\n  toast(message:string,duration:number=2000):void{\n    if (this.t) {\n      this.t.dismiss();\n    }\n    this.t=this.toastCtrl.create({\n      message: message,\n      duration: duration,\n      showCloseButton: true,\n      closeButtonText: 'OK',\n      position: 'bottom'\n    });\n    this.t.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/toast.service.ts","import { Component } from '@angular/core';\n\nimport { CollectionPage } from '../collection/collection';\nimport { HomePage } from '../home/home';\nimport {UpdateService} from \"../../services/update.service\";\nimport {MePage} from \"../me/me\";\n\n@Component({\n  templateUrl: 'tabs.html'\n})\nexport class TabsPage {\n\n  tab1Root = HomePage;\n  tab2Root = CollectionPage;\n  tab3Root = MePage;\n\n  constructor(\n    private updateSvc: UpdateService\n  ) {}\n\n  get hasNewVersion():boolean{\n    return this.updateSvc.hasNewVersion;\n  }\n\n  ngOnInit(){\n    setTimeout(()=>{\n      this.updateSvc.checkUpdate();\n    },1000);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { Component } from '@angular/core';\nimport {AlertController, NavController} from 'ionic-angular';\nimport {CollectionService} from \"../../services/collection.service\";\nimport {BookCollection} from \"../../classes/collection\";\nimport {BookDetailPage} from \"../book-detail/book-detail\";\n\n@Component({\n  selector: 'page-collection',\n  templateUrl: 'collection.html'\n})\nexport class CollectionPage {\n\n  constructor(\n    private navCtrl: NavController,\n    private alertCtrl: AlertController,\n    private collectionSvc: CollectionService\n  ) {}\n\n  get bookCollections():BookCollection[]{\n    return this.collectionSvc.collections;\n  }\n\n  goBookDetail(bookCollection:BookCollection){\n    this.navCtrl.push(BookDetailPage,{\n      'id':bookCollection.bookId\n    });\n  }\n\n  deleteAllCollections(){\n    this.alertCtrl.create({\n      title: '删除',\n      message: '确定要删除所有的收藏记录吗？',\n      buttons: [\n        {\n          text: '取消'\n        },\n        {\n          text: '是的，删除',\n          handler: () => {\n            this.collectionSvc.deleteAllCollections();\n          }\n        }\n      ]\n    }).present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/collection/collection.ts","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport {LibraryService} from \"../../services/library.service\";\nimport {BookDetailPage} from \"../book-detail/book-detail\";\nimport {HotBook, LatestBook} from \"../../classes/book\";\nimport {BookSearchPage} from \"../book-search/book-search\";\nimport {ToastService} from \"../../services/toast.service\";\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  constructor(\n    public navCtrl: NavController,\n    private librarySvc: LibraryService,\n    private toastSvc: ToastService,\n  ) {}\n\n  latestBooks:LatestBook[]=[];\n  hotBooks:HotBook[]=[];\n  searchText:string='';\n  bookListType:'hot'|'latest'='hot';\n\n  ionViewDidLoad(){\n    this.freshenLatestBooks();\n    this.freshenHotBooks();\n  }\n\n  doRefresh(refresher){\n    this.freshenHotBooks().then(()=>{\n      this.freshenLatestBooks().then(()=>{\n        refresher.complete();\n      });\n    }).catch(()=>{\n      refresher.complete();\n    });\n  }\n\n\n  freshenHotBooks():Promise<void>{\n    return this.librarySvc.hotBooks().then((books)=>{\n        this.hotBooks=books;\n    }).catch(()=>{\n      this.toastSvc.toast('获取热门图书失败');\n      throw new Error();\n    });\n  }\n\n  freshenLatestBooks():Promise<void>{\n    return this.librarySvc.latestBooks().then(books=>{\n      this.latestBooks=books;\n    }).catch(()=>{\n        this.toastSvc.toast('获取最新图书失败');\n        throw new Error();\n    });\n  }\n\n  goBookDetail(bookId:string,base:string){\n    this.navCtrl.push(BookDetailPage,{\n      'id': bookId,\n      'base': base\n    });\n  }\n\n  search(){\n    this.navCtrl.push(BookSearchPage,{\n      'searchText': this.searchText\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport {AccountService} from \"../../services/account.service\";\nimport {AboutPage} from \"../about/about\";\nimport {LoginPage} from \"../login/login\";\nimport {ToastService} from \"../../services/toast.service\";\nimport {UpdateService} from \"../../services/update.service\";\nimport {BorrowHistoryPage} from \"../borrow-history/borrow-history\";\nimport {SocialSharing} from \"@ionic-native/social-sharing\";\n\n\n@Component({\n  selector: 'page-me',\n  templateUrl: 'me.html',\n})\nexport class MePage {\n\n  constructor(\n    public navCtrl: NavController,\n    private toastSvc: ToastService,\n    private updateSvc: UpdateService,\n    private accountSvc: AccountService,\n    private socialSharing: SocialSharing\n  ) {}\n\n  get hasNewVersion():boolean{\n    return this.updateSvc.hasNewVersion;\n  }\n\n  get user(){\n    return this.accountSvc.user;\n  }\n\n\n  shareApp(){\n    this.socialSharing.shareWithOptions({\n      message: '浙图：可能是最好用的浙大图书馆第三方app',\n      subject: `浙大图书馆`,\n      url: 'http://home.zjulibrary.sparker.top/'\n    });\n  }\n\n  logout(){\n    this.accountSvc.logout();\n    this.toastSvc.toast('已成功退出登录');\n  }\n\n  goLoginPage(){\n    this.navCtrl.push(LoginPage);\n  }\n\n  goBorrowHistoryPage(){\n      this.navCtrl.push(BorrowHistoryPage);\n  }\n\n  goAboutPage(){\n    this.navCtrl.push(AboutPage);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/me/me.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { MyApp } from './app.component';\n\nimport { CollectionPage } from '../pages/collection/collection';\nimport { HomePage } from '../pages/home/home';\nimport { TabsPage } from '../pages/tabs/tabs';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport {LibraryService} from \"../services/library.service\";\nimport {BookDetailPageModule} from \"../pages/book-detail/book-detail.module\";\nimport {ComponentsModule} from \"../components/components.module\";\nimport {BookSearchPageModule} from \"../pages/book-search/book-search.module\";\nimport {IonicStorageModule} from \"@ionic/storage\";\nimport {CollectionService} from \"../services/collection.service\";\nimport {ToastService} from \"../services/toast.service\";\nimport {InAppBrowser} from \"@ionic-native/in-app-browser\";\nimport {UpdateService} from \"../services/update.service\";\nimport {AccountService} from \"../services/account.service\";\nimport {AboutPageModule} from \"../pages/about/about.module\";\nimport {MePage} from \"../pages/me/me\";\nimport {LoginPageModule} from \"../pages/login/login.module\";\nimport {BorrowHistoryPageModule} from \"../pages/borrow-history/borrow-history.module\";\nimport {CookieModule} from \"ngx-cookie\";\nimport {SocialSharing} from \"@ionic-native/social-sharing\";\nimport {BookItemsPageModule} from \"../pages/book-items/book-items.module\";\nimport {Clipboard} from \"@ionic-native/clipboard\";\nimport {AppRate} from \"@ionic-native/app-rate\";\nimport {HttpClientModule} from \"@angular/common/http\";\n\n@NgModule({\n  declarations: [\n    MyApp,\n    CollectionPage,\n    MePage,\n    HomePage,\n    TabsPage\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    IonicModule.forRoot(MyApp),\n    IonicStorageModule.forRoot(),\n    CookieModule.forRoot(),\n    BookDetailPageModule,\n    BookSearchPageModule,\n    AboutPageModule,\n    LoginPageModule,\n    BorrowHistoryPageModule,\n    BookItemsPageModule,\n    ComponentsModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    MePage,\n    CollectionPage,\n    HomePage,\n    TabsPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    LibraryService,\n    CollectionService,\n    UpdateService,\n    AccountService,\n    ToastService,\n    InAppBrowser,\n    SocialSharing,\n    Clipboard,\n    AppRate,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","export class LatestBook {\n  id:string;\n  base:string;\n  title:string;\n}\n\nexport class HotBook {\n  id:string;\n  base:string;\n  title:string;\n}\n\nexport class BookRecord {\n  id:string;\n  ISBN:string;\n  title:string;\n  author:string;\n  editor:string;\n  press:string;\n  year:string;\n}\n\nexport class BookDetail {\n  id:string;\n  ISBN:string;\n  classNumber:string;\n  // callNumber:string;\n  price:string;\n  bindingType:string;\n  title:string;\n  author:string;\n  editor:string;\n  press:{\n    name:string;\n    location:string;\n  }={\n    name:null,\n    location:null\n  };\n  year:string;\n  pageCount:number;\n}\n\n\nexport class BookItem {\n  callNumber:string;\n  status:string;\n  barcode:string;\n  subLibrary:string;\n  requested:boolean=false;\n  onHold:boolean=false;\n  borrowed:boolean=false;\n  dueDate:string=null;\n}\n\nexport class BookDouban {\n  tags:{\n    count:number;\n    name:string;\n    title:string;\n  }[];\n  rating:{\n    max:number;\n    numRaters:number;\n    average:number;\n    min:number;\n  };\n  image:string;\n  summary:string;\n  authorIntro:string;\n  catalog:string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/book.ts","import {Component, EventEmitter, Input, Output} from '@angular/core';\n\n\n@Component({\n  selector: 'search-box',\n  templateUrl: 'search-box.html'\n})\nexport class SearchBoxComponent {\n  focusing:boolean=false;\n\n  @Input()text: string;\n  @Output()doSearch = new EventEmitter();\n  @Output() textChange:EventEmitter<string> = new EventEmitter<string>();\n\n  constructor() {}\n\n  actionButtonClicked(){\n    // this.focusing=true;//prevent button sliding to right\n    this.textChange.emit(this.text);\n    this.doSearch.emit();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/search-box/search-box.ts","import { Component } from '@angular/core';\nimport {Config, Platform} from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { TabsPage } from '../pages/tabs/tabs';\nimport {AccountService} from \"../services/account.service\";\nimport {ToastService} from \"../services/toast.service\";\nimport {AppRate} from \"@ionic-native/app-rate\";\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = TabsPage;\n\n  constructor(\n    platform: Platform,\n    statusBar: StatusBar,\n    splashScreen: SplashScreen,\n    accountSvc: AccountService,\n    toastSvc: ToastService,\n    config: Config,\n    appRate: AppRate,\n  ) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n      config.set('ios','backButtonText','');\n      if (platform.is('ios')) {\n        appRate.preferences = {\n          useLanguage:'zh-Hans',\n          usesUntilPrompt: 5,\n          displayAppName:'浙图',\n          promptAgainForEachNewVersion:false,\n          storeAppURL: {\n            ios: '1271782243',\n          }\n        };\n        appRate.promptForRating(false);\n      }\n      accountSvc.autoLogin().catch(() => {\n        toastSvc.toast('尝试自动登录失败');\n      });\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Injectable} from '@angular/core';\nimport 'rxjs/add/operator/toPromise';\nimport {CONST} from \"../app/const\";\nimport {BookDetail, BookDouban, BookItem, BookRecord, HotBook, LatestBook} from \"../classes/book\";\nimport {HttpClient} from \"@angular/common/http\";\n\n\n@Injectable()\nexport class LibraryService {\n  constructor(\n    private http: HttpClient\n  ) {}\n\n  latestBooks():Promise<LatestBook[]>{\n    return this.http.get(\n      CONST.libraryUrl+'/cgi-bin/newbook.cgi?base=ALL&cls=ALL&date=180',\n      {responseType: 'text'}\n    ).toPromise().then((data)=>{\n      let books:LatestBook[]=[];\n      function newbook(obj){\n        for (let key in obj) {\n          if (obj.hasOwnProperty(key)) {\n            books.push({\n              id:key,\n              base:obj[key].b,\n              title: obj[key].t\n            });\n          }\n        }\n      }\n      function nav(){}\n      eval(data);\n      return books;\n    });\n  }\n\n  hotBooks():Promise<HotBook[]>{\n    return this.http.get(\n      CONST.libraryUrl+'/opac_lcl_chi/loan_top_ten/loan.ALL.ALL.y',\n      {responseType: 'text'}\n    ).toPromise().then((data)=>{\n      let html=(new DOMParser()).parseFromString(data,'text/html');\n      let books:HotBook[]=[];\n      let lis=html.getElementsByTagName('li');\n      for (let i = 0; i < lis.length; i++) {\n        let a=lis[i].getElementsByTagName('a')[0];\n        let url=a.getAttribute('url');\n        books.push({\n          id:url.match(/request=[^&]+/)[0].replace('request=',''),\n          base:url.match(/local_base=[^&]+/)[0].replace('local_base=',''),\n          title:a.innerText.replace(/ +/g,'')\n        })\n      }\n      return books;\n    });\n  }\n\n\n  bookDetail(base,id):Promise<BookDetail>{\n    return this.http.get(CONST.libraryUrl+'/X',{\n      params:{\n        'op':'find-doc',\n        'doc_num':id,\n        'base':base\n      },\n      responseType: 'text'\n    }).toPromise().then((data)=>{\n      let book=new BookDetail();\n      let xml=(new DOMParser()).parseFromString(data,'text/xml');\n      let fixFields=xml.getElementsByTagName('fixfield');\n      for (let i = 0; i < fixFields.length; i++) {\n        let fixField=fixFields[i];\n        let id=fixField.getAttribute('id');\n        let value=fixField.childNodes[0].nodeValue;\n        if (id == '001') {\n          book.id=value;\n        }\n      }\n      let varFields=xml.getElementsByTagName('varfield');\n      for(let i=0; i<varFields.length; i++){\n        let varField=varFields[i];\n        let subFields=varField.getElementsByTagName('subfield');\n        for (let j=0; j<subFields.length; j++) {\n          let subField=subFields[j];\n          let id=varField.getAttribute('id');\n          let label=subField.getAttribute('label');\n          let nodeValue=(subField.childNodes&&subField.childNodes[0])?subField.childNodes[0].nodeValue:null;\n          if (id=='200'){\n            if (label == 'a') {\n              book.title=nodeValue;\n            }else if (label == 'f') {\n              book.author=nodeValue;\n            }else if (label == 'g') {\n              book.editor=nodeValue;\n            }\n          }else if (id=='210') {\n            if (label == 'c') {\n              book.press.name=nodeValue;\n            }else if (label == 'd') {\n              book.year=nodeValue;\n            }else if (label == 'a') {\n              book.press.location=nodeValue;\n            }\n          }else if (id == '215' && label == 'a') {\n            book.pageCount=parseInt(nodeValue);\n          }else if (id == '010') {\n            if (label == 'a') {\n              book.ISBN=nodeValue;\n            }else if (label == 'b') {\n              book.bindingType=nodeValue;\n            }else if (label == 'd') {\n              book.price=nodeValue;\n            }\n          }else if (id == '690') {\n            if (label == 'a') {\n              book.classNumber=nodeValue;\n            }\n          }\n        }\n      }\n      return book;\n    });\n  }\n\n\n  bookDouban(isbn:string):Promise<BookDouban>{\n    return this.http.get(CONST.doubanUrl+`/v2/book/isbn/${isbn}`).toPromise().then((data:any) => {\n      data['authorIntro']=data['author_intro'];\n      return data;\n    });\n  }\n\n\n  bookItems(base,id):Promise<BookItem[]>{\n    return this.http.get(CONST.libraryUrl+'/X',{\n      params:{\n        'op':'item-data',\n        'doc_num':id,\n        'base':base\n      },\n      responseType: 'text'\n    }).toPromise().then((data)=>{\n      let xml=(new DOMParser()).parseFromString(data,'text/xml');\n      let items:BookItem[]=[];\n      let xmlItems=xml.getElementsByTagName('item');\n      for (let i = 0; i < xmlItems.length; i++) {\n        let xmlItem=xmlItems[i];\n        let item=new BookItem();\n        let temp;\n        temp=xmlItem.getElementsByTagName('call-no-1');\n        if(temp.length>0&&temp[0].childNodes.length>0)\n          item.callNumber=temp[0].childNodes[0].nodeValue;\n        temp=xmlItem.getElementsByTagName('barcode');\n        if(temp.length>0&&temp[0].childNodes.length>0)\n          item.barcode=temp[0].childNodes[0].nodeValue;\n        temp=xmlItem.getElementsByTagName('sub-library');\n        if(temp.length>0&&temp[0].childNodes.length>0)\n          item.subLibrary=temp[0].childNodes[0].nodeValue;\n        temp=xmlItem.getElementsByTagName('requested');\n        if(temp.length>0&&temp[0].childNodes.length>0)\n          item.requested=(temp[0].childNodes[0].nodeValue=='Y');\n        temp=xmlItem.getElementsByTagName('status');\n        if(temp.length>0&&temp[0].childNodes.length>0){\n          let statusCode=temp[0].childNodes[0].nodeValue;\n          switch (statusCode){\n            case '21': item.status='图书阅览';break;\n            case '12': item.status='普通借阅';break;\n            case '11': item.status='编目中';break;\n            default: item.status='未知';\n          }\n        }\n        temp=xmlItem.getElementsByTagName('loan-status');\n        if(temp.length>0&&temp[0].childNodes.length>0)\n          item.borrowed=(temp[0].childNodes[0].nodeValue=='A');\n        temp=xmlItem.getElementsByTagName('on-hold');\n        if(temp.length>0&&temp[0].childNodes.length>0)\n          item.onHold=(temp[0].childNodes[0].nodeValue=='Y');\n        temp=xmlItem.getElementsByTagName('loan-due-date');\n        if(temp.length>0&&temp[0].childNodes.length>0)\n          item.dueDate=temp[0].childNodes[0].nodeValue;\n        items.push(item);\n      }\n      return items;\n    });\n  }\n\n\n  search(text:string):Promise<{setId:string;totalCount:number;}>{\n    return this.http.get(CONST.libraryUrl+'/X',{\n      params:{\n        'op':'find',\n        'code':'wrd',\n        'request':text,\n        'base':'ZJU01'\n      },\n      responseType: 'text'\n    }).toPromise().then((data)=>{\n      let xml=(new DOMParser()).parseFromString(data,'text/xml');\n      if (xml.getElementsByTagName('error').length > 0) {//search error (eg. empty set)\n        return {\n          setId:null,\n          totalCount:0\n        };\n      }\n      return {\n        setId: xml.getElementsByTagName('set_number')[0].childNodes[0].nodeValue,\n        totalCount: parseInt(\n          xml.getElementsByTagName('no_records')[0].childNodes[0].nodeValue\n        )\n      };\n    });\n  }\n\n  present(start:number,length:number,setId:string):Promise<BookRecord[]>{\n    return this.http.get(CONST.libraryUrl+'/X',{\n      params:{\n        'op':'present',\n        'set_entry':`${start}-${start+length-1}`,\n        'set_number':setId,\n        'base':'ZJU01'\n      },\n      responseType: 'text'\n    }).toPromise().then((data)=>{\n      let xml=(new DOMParser()).parseFromString(data,'text/xml');\n      let records=xml.getElementsByTagName('record');\n      let books:BookRecord[]=[];\n      for (let k = 0; k < records.length; k++) {\n        let record=records[k];\n        let book=new BookRecord();\n        book.id=record.getElementsByTagName('doc_number')[0].childNodes[0].nodeValue;\n        let varFields=record.getElementsByTagName('varfield');\n        for(let i=0; i<varFields.length; i++){\n          let varField=varFields[i];\n          let subFields=varField.getElementsByTagName('subfield');\n          for (let j=0; j<subFields.length; j++) {\n            let subField=subFields[j];\n            let id=varField.getAttribute('id');\n            let label=subField.getAttribute('label');\n            let nodeValue=subField.childNodes[0].nodeValue;\n            if (id=='200'){\n              if (label == 'a') {\n                book.title=nodeValue;\n              }else if (label == 'f') {\n                book.author=nodeValue;\n              }else if (label == 'g') {\n                book.editor=nodeValue;\n              }\n            }else if (id=='210') {\n              if (label == 'c') {\n                book.press=nodeValue;\n              }else if (label == 'd') {\n                book.year=nodeValue;\n              }\n            }else if (id == '010') {\n              if (label == 'a') {\n                book.ISBN=nodeValue;\n              }\n            }\n          }\n        }\n        books.push(book);\n      }\n      return books;\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/library.service.ts","import {Injectable} from '@angular/core';\nimport {HttpHeaders} from '@angular/common/http';\nimport 'rxjs/add/operator/toPromise';\nimport {CONST} from \"../app/const\";\nimport {User} from \"../classes/user\";\nimport {Storage} from \"@ionic/storage\";\nimport {HistoryBorrow} from \"../classes/borrow\";\nimport {CookieService} from \"ngx-cookie\";\nimport {HttpClient, HttpParams} from \"@angular/common/http\";\n\n\n@Injectable()\nexport class AccountService {\n  private username:string;\n  private password:string;\n  user:User;\n  private alephSessionId:string;\n\n  constructor(\n    private http: HttpClient,\n    private cookieSvc: CookieService,\n    private storage: Storage\n  ) {}\n\n  fetchAccount():Promise<void>{\n    return new Promise<void>((resolve, reject) => {\n      this.storage.get('account').then((data)=>{\n        if (data) {\n          if (data['username'])this.username=data['username'];\n          if (data['password'])this.password=data['password'];\n        }\n        resolve();\n      });\n    });\n  }\n\n  saveAccount():Promise<void>{\n    return this.storage.set('account',{\n      username:this.username,\n      password:this.password\n    });\n  }\n\n\n  autoLogin():Promise<void>{\n    return new Promise<void>((resolve, reject) => {\n      this.fetchAccount().then(()=>{\n        if (this.username && this.password) {\n          this.login(this.username,this.password).then(() => {\n            resolve();\n          }).catch(() => {\n            reject();\n          });\n        }\n      });\n    });\n  }\n\n  login(username:string,password:string):Promise<void>{\n    return new Promise<void>((resolve, reject) => {\n      let headers = new HttpHeaders({'Content-Type': 'application/x-www-form-urlencoded'});\n      let  body = new HttpParams();\n      body.append('func', 'login-session');\n      body.append('login_source', 'bor-info');\n      body.append('bor_id', username);\n      body.append('bor_verification', password);\n      body.append('bor_library', 'ZJU50');\n      this.http.post(CONST.libraryUrl+`/F`, body.toString(), {\n        headers: headers,\n        responseType: 'text'\n      }).toPromise().then((data)=>{\n        console.log(data);\n        if (data.search('校园卡统一身份认证登录')==-1) {\n          let alephSessionId=data.match(/ALEPH_SESSION_ID ?= ?([A-Z]|\\d)+/)[0].replace(/ALEPH_SESSION_ID ?= ?/,'');\n          this.cookieSvc.put('ALEPH_SESSION_ID',alephSessionId);\n          this.alephSessionId=alephSessionId;\n          this.username=username;\n          this.password=password;\n          this.saveAccount().then(() => {\n            this.freshenUserInfo().then(() => {\n              resolve();\n            });\n          });\n          // Promise.all([,]).then(() => {\n          //\n          // });\n        }else{\n          this.user=null;\n          reject();\n        }\n      }).catch((err) => {\n        console.log(err);\n        reject();\n      });\n    });\n  }\n\n  logout(){\n    this.user=null;\n    this.username=null;\n    this.password=null;\n    this.saveAccount();\n    this.cookieSvc.remove('ALEPH_SESSION_ID');\n  }\n\n  freshenUserInfo():Promise<void>{\n    return this.http.get(CONST.libraryUrl+'/X',{\n      params:{\n        'op':'bor-info',\n        'bor_id':this.username,\n        'verification':this.password\n      },\n      responseType: 'text'\n    }).toPromise().then((data)=>{\n      let xml=(new DOMParser()).parseFromString(data,'text/xml');\n      if (xml.getElementsByTagName('error').length>0){\n        throw new Error();\n      }\n      this.user={\n        id:xml.getElementsByTagName('z303-id')[0].childNodes[0].nodeValue,\n        name:xml.getElementsByTagName('z303-name')[0].childNodes[0].nodeValue,\n        studentId:this.username,\n        gender:xml.getElementsByTagName('z303-gender')[0].childNodes[0].nodeValue\n      };\n    });\n  }\n\n\n  // getHistoryBorrows():Promise<HistoryBorrow[]>{\n  //   let httpOptions={\n  //     responseType: 'text'\n  //   };\n  //   if (window.location.hostname == '') {\n  //     httpOptions['headers']=new HttpHeaders({'Cookie': 'ALEPH_SESSION_ID='+this.alephSessionId});\n  //     httpOptions['withCredentials']=true;\n  //   }\n  //   return this.http.get(CONST.libraryUrl+'/F?func=bor-history-loan&adm_library=ZJU50',httpOptions).toPromise().then((data)=>{\n  //     let html=(new DOMParser()).parseFromString(data,'text/html');\n  //     let table=html.getElementsByTagName('table')[2];\n  //     let borrows:HistoryBorrow[]=[];\n  //     let trs=table.getElementsByTagName('tr');\n  //     for (let i = 1; i < trs.length; i++) {\n  //       let tds=trs[i].getElementsByTagName('td');\n  //       borrows.push({\n  //         bookName:tds[2].innerText,\n  //         author:tds[1].innerText,\n  //         subLibrary:tds[9].innerText,\n  //         returnDate:tds[6].innerText\n  //       });\n  //     }\n  //     return borrows;\n  //   });\n  // }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/account.service.ts","import { Component } from '@angular/core';\nimport {IonicPage, Loading, LoadingController, NavController, NavParams} from 'ionic-angular';\nimport {LibraryService} from \"../../services/library.service\";\nimport {BookDetail, BookDouban, BookItem} from \"../../classes/book\";\nimport {CollectionService} from \"../../services/collection.service\";\nimport {ToastService} from \"../../services/toast.service\";\nimport {BookItemsPage} from \"../book-items/book-items\";\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-book-detail',\n  templateUrl: 'book-detail.html',\n})\nexport class BookDetailPage {\n  detail:BookDetail;\n  douban:BookDouban;\n  // items:BookItem[];\n  loading:Loading;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private librarySvc: LibraryService,\n    private collectionSvc: CollectionService,\n    private loadingCtrl: LoadingController,\n    private toastSvc: ToastService\n  ) {}\n\n\n  get id():string{\n    return this.navParams.get('id');\n  }\n\n  get base():string{\n    let base=this.navParams.get('base');\n    if (!base) {\n      base='ZJU01';\n    }\n    return base;\n  }\n\n\n  get bookLoaded(){\n    return (this.detail && this.detail.id);\n  }\n\n  get isCollected():boolean{\n    if (this.bookLoaded) {\n      return this.collectionSvc.isCollected(this.detail.id);\n    }else{\n      return false;\n    }\n  }\n\n\n  get rateRounded():number{\n    return Math.round(this.douban.rating.average);\n  }\n\n  ionViewWillLoad(){\n    this.loading=this.loadingCtrl.create({\n      spinner: 'dots',\n      content: '加载中'\n    });\n    this.loading.present();\n  }\n\n  ionViewDidLoad(){\n    this.freshenBookData().then(()=>{\n      this.loading.dismiss();\n    }).catch(()=>{\n      this.navCtrl.pop();\n      this.loading.dismiss();\n      this.toastSvc.toast('加载失败');\n    });\n  }\n\n  doRefresh(refresher){\n    this.freshenBookData().then(()=>{\n      refresher.complete();\n    }).catch(()=>{\n      refresher.complete();\n      this.toastSvc.toast('加载失败');\n    });\n  }\n\n  freshenBookData():Promise<void>{\n    return new Promise((resolve, reject) => {\n      this.librarySvc.bookDetail(this.base,this.id).then(detail=>{\n        this.librarySvc.bookDouban(detail.ISBN).then(douban=>{\n          this.detail=detail;\n          this.douban=douban;\n          resolve();\n        }).catch(() => {\n          this.detail=detail;\n          resolve();\n        });\n      }).catch(() => {\n        reject();\n      });\n    });\n  }\n\n  toggleCollect(){\n    if (this.isCollected) {\n      this.collectionSvc.unCollect(this.detail.id);\n    }else{\n      this.collectionSvc.collect({\n        bookId:this.detail.id,\n        title:this.detail.title,\n        author:this.detail.author,\n        classNumber:this.detail.classNumber,\n        press:this.detail.press.name,\n        year:this.detail.year\n      });\n    }\n  }\n\n  viewBookItems(){\n    this.navCtrl.push(BookItemsPage,{\n      'id':this.id,\n      'base':this.base\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book-detail/book-detail.ts","export const CONST={\n  libraryUrl:window['cordova']?'http://webpac.zju.edu.cn':'/zju',\n  ossUrl:'http://qiniu.zjulibrary.sparker.top',\n  doubanUrl:window['cordova']?'https://api.douban.com':'/douban',\n  version:{\n    major:1,\n    minor:2,\n    patch:1\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/const.ts","import {Injectable} from '@angular/core';\nimport 'rxjs/add/operator/toPromise';\nimport {Version} from \"../classes/version\";\nimport {CONST} from \"../app/const\";\nimport {HttpClient} from \"@angular/common/http\";\n\n@Injectable()\nexport class UpdateService {\n  latestVersion:Version;\n  hasNewVersion:boolean=false;\n\n  constructor(\n    private http: HttpClient\n  ) {}\n\n\n  checkUpdate():Promise<boolean>{\n    return this.http.get(CONST.ossUrl+`/version.json?t=${Date.now()}`).toPromise().then((data:Version)=>{\n      this.latestVersion=data;\n      this.hasNewVersion=(\n        (this.latestVersion.major > CONST.version.major)||\n        (this.latestVersion.major==CONST.version.major&&this.latestVersion.minor>CONST.version.minor)||\n        (this.latestVersion.major==CONST.version.major&&this.latestVersion.minor==CONST.version.minor&&(this.latestVersion.patch>CONST.version.patch))\n      );\n      return this.hasNewVersion;\n    });\n  }\n\n  get androidDownloadLink(){\n    return `${CONST.ossUrl}/apk/zjuLibrary${this.latestVersion.major}.${this.latestVersion.minor}.${this.latestVersion.patch}.apk`;\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/update.service.ts","import {Injectable} from '@angular/core';\nimport {Storage} from \"@ionic/storage\";\nimport {BookCollection} from \"../classes/collection\";\n\n@Injectable()\nexport class CollectionService {\n  collections:BookCollection[]=[];\n\n  constructor(\n    private storage: Storage\n  ) {\n    this.freshenCollections();\n  }\n\n  freshenCollections(){\n    this.storage.get('collections').then(data=>{\n      if (Object.prototype.toString.call(data) === '[object Array]') {\n        this.collections=data;\n      }else{\n        this.collections=[];\n      }\n    });\n  }\n\n  saveCollections():Promise<void>{\n    return this.storage.set('collections',this.collections);\n  }\n\n  isCollected(bookId:string):boolean{\n    if (!bookId) {\n      return false;\n    }\n    for(let collection of this.collections){\n      if (bookId == collection.bookId) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  collect(newCollection:BookCollection):Promise<void>{\n    this.collections.push(newCollection);\n    return this.saveCollections();\n  }\n\n  unCollect(bookId:string):Promise<void>{\n    for (let i = 0; i < this.collections.length; i++) {\n      if (bookId == this.collections[i].bookId) {\n        this.collections.splice(i,1);\n        i--;\n      }\n    }\n    return this.saveCollections();\n  }\n\n  deleteAllCollections():Promise<void>{\n    this.collections=[];\n    return this.saveCollections();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/collection.service.ts"],"sourceRoot":""}